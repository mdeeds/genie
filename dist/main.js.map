{"version":3,"sources":["webpack:///./src/index.js","webpack:///./src/table.js","webpack:///webpack/bootstrap","webpack:///webpack/startup"],"names":[],"mappings":";;;;;;;;AAAa;AACb,6BAA6C,CAAC,cAAc,CAAC;AAC7D,gBAAgB,mBAAO,CAAC,GAAS;AACjC;AACA,iC;;;;;;;ACJa;AACb,8CAA6C,CAAC,cAAc,EAAC;AAC7D,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,OAAO;AAC9B;AACA;AACA;AACA,uBAAuB,OAAO;AAC9B,2BAA2B,OAAO;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B,EAAE;AAChC,6BAA6B,EAAE;AAC/B;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA,+BAA+B,EAAE;AACjC,8BAA8B,EAAE;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B,kDAAkD;AAChF,6BAA6B,kDAAkD;AAC/E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,iC;;;;;;UC1GA;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;;UCrBA;UACA;UACA;UACA","file":"main.js","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst table_1 = require(\"./table\");\nconst table = new table_1.Table();\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Table = void 0;\nclass Table {\n    constructor() {\n        this.magnets = new Set();\n        const body = document.getElementsByTagName('body')[0];\n        this.container = document.createElement('div');\n        this.container.classList.add('table');\n        body.appendChild(this.container);\n        for (let i = 0; i < 5; ++i) {\n            this.addToken(\"X\", 100 + i * 20, 100);\n            this.addToken(\"O\", 100 + i * 30, 150);\n        }\n        for (let i = 0; i < 3; ++i) {\n            for (let j = 0; j < 3; ++j) {\n                this.addMagnet(i * 50 + 300, j * 50 + 100);\n            }\n        }\n    }\n    addToken(label, x, y) {\n        const token = document.createElement('span');\n        token.innerText = label;\n        token.classList.add('token');\n        token.style.left = `${x}px`;\n        token.style.top = `${y}px`;\n        token.addEventListener('mousedown', (me) => {\n            this.handleMouseEvent(token, me);\n        });\n        token.addEventListener('mousemove', (me) => {\n            this.handleMouseEvent(token, me);\n        });\n        token.addEventListener('mouseout', (me) => {\n            this.handleMouseEvent(token, me);\n        });\n        token.addEventListener('mouseup', (me) => {\n            this.handleMouseEvent(token, me);\n        });\n        // this.container.addEventListener('mousemove',\n        //   (me) => {\n        //     if (this.dragging) {\n        //       this.handleMouseEvent(this.dragging, me);\n        //     }\n        //   })\n        this.container.appendChild(token);\n    }\n    addMagnet(x, y) {\n        const magnet = document.createElement('span');\n        magnet.classList.add('magnet');\n        magnet.style.left = `${x}px`;\n        magnet.style.top = `${y}px`;\n        this.container.appendChild(magnet);\n        this.magnets.add(magnet);\n    }\n    intersects(a, b) {\n        if (a.left <= b.right && a.top <= b.bottom &&\n            a.right >= b.left && a.bottom >= b.top) {\n            return true;\n        }\n        else {\n            return false;\n        }\n    }\n    moveToXY(token, x, y) {\n        const tokenBB = token.getBoundingClientRect();\n        token.style.left = `${x - tokenBB.width / 2 - this.container.offsetLeft}px`;\n        token.style.top = `${y - tokenBB.height / 2 - this.container.offsetTop}px`;\n    }\n    moveToCenter(token, location) {\n        const x = (location.left + location.right) / 2;\n        const y = (location.top + location.bottom) / 2;\n        this.moveToXY(token, x, y);\n    }\n    checkMagnets(token) {\n        const tokenBB = token.getBoundingClientRect();\n        for (const m of this.magnets) {\n            const magnetBB = m.getBoundingClientRect();\n            if (this.intersects(magnetBB, tokenBB)) {\n                this.moveToCenter(token, magnetBB);\n                break;\n            }\n        }\n    }\n    handleMouseEvent(token, ev) {\n        ev.preventDefault();\n        switch (ev.type) {\n            case 'mousemove':\n            case 'mouseout':\n                if (this.dragging != ev.target) {\n                    return;\n                }\n                break;\n            case 'mousedown':\n                this.dragging = ev.target;\n                this.dragging.classList.add('dragging');\n                break;\n            case 'mouseup':\n                this.checkMagnets(token);\n                this.dragging.classList.remove('dragging');\n                this.dragging = null;\n                return;\n        }\n        this.moveToXY(token, ev.clientX, ev.clientY);\n    }\n}\nexports.Table = Table;\n//# sourceMappingURL=table.js.map","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tif(__webpack_module_cache__[moduleId]) {\n\t\treturn __webpack_module_cache__[moduleId].exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// startup\n// Load entry module\n__webpack_require__(138);\n// This entry module used 'exports' so it can't be inlined\n"],"sourceRoot":""}